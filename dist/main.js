!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n.r(e);var r=new(function(){function t(){var e=this;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance||(this.xSize=parseInt("7"),this.ySize=parseInt("15"),this.side=parseInt("50"),this.defaultFieldCell={color:"#fff",borderColor:"#000",value:0},this.field=Array(this.ySize).fill().map((function(){return Array(e.xSize).fill(e.defaultFieldCell)})),t.instance=this),t.instance}var e,n,r;return e=t,(n=[{key:"setX",value:function(e){t.instance.xSize=e}},{key:"setY",value:function(e){t.instance.ySize=e}},{key:"setSide",value:function(e){t.instance.side=e}},{key:"setField",value:function(e){t.instance.field=e}},{key:"checkField",value:function(){var t=this;this.field.forEach((function(e,n){var o=!0;e.map((function(t){0==t.value&&(o=!1)})),o&&(t.field.splice(n,1),t.field.unshift(Array(t.xSize).fill(t.defaultFieldCell)))}))}}])&&o(e.prototype,n),r&&o(e,r),t}());function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[[0,1,0],[1,1,1]];i(this,t),this.x=e,this.y=n,this.shape=o,this.color="#4CAF50",this.borderColor="#ff7043"}var e,n,o;return e=t,(n=[{key:"setX",value:function(t){this.x=t}},{key:"setY",value:function(t){this.y=t}},{key:"rotate",value:function(){for(var t=[],e=this.shape[0].length-1;e>=0;e--){t.push(Array(this.shape.length).fill(0));for(var n=0;n<this.shape.length;n++)t[t.length-1][n]=this.shape[n][e]}if(this.checkCollision(this.x,this.y,t))return!1;this.shape=t}},{key:"draw",value:function(t,e){for(var n=this.x,o=this.y,i=0;i<this.shape.length;i++){for(var c=0;c<this.shape[i].length;c++)1==this.shape[i][c]&&e(t,n,o,r.side,this.borderColor,this.color),n+=r.side;o+=r.side,n=this.x}}},{key:"move",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"down",n=this.x,o=this.y;switch(e){case"up":o-=t;break;case"down":o+=t;break;case"left":n-=t;break;case"right":n+=t}if(this.checkCollision(n,o))switch(e){case"down":this.freeze();break;default:return!1}else this.x=n,this.y=o}},{key:"checkCollision",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.shape;if(t<0||e<0)return!0;var o=t/r.side,i=e/r.side;if(i+n.length>r.ySize||o+n[0].length>r.xSize)return!0;for(var c=0;c<n.length;c++)for(var u=0;u<n[c].length;u++)if(1==r.field[i+c][o+u].value&&1==n[c][u])return!0;return!1}},{key:"freeze",value:function(){for(var t=this.x/r.side,e=this.y/r.side,n=this.shape.length-1;n>=0;n--)for(var o=this.shape[n].length-1;o>=0;o--)0!=this.shape[n][o]&&(r.field[e+n][t+o]={value:1,color:this.color,borderColor:this.borderColor});Y.refreshBlock()}}])&&c(e.prototype,n),o&&c(e,o),t}();function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=l(this,a(e).call(this,t,n,[[1,1],[1,1]]))).color="#ff7043",o.borderColor="#bf360c",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(e,t),e}(u);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=h(this,b(e).call(this,t,n,[[1,1,1,1]]))).color="#009688",o.borderColor="#004d40",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(e,t),e}(u);function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){return!e||"object"!==w(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var k=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=m(this,g(e).call(this,t,n,[[0,1,1],[1,1,0]]))).color="#cddc39",o.borderColor="#9e9d24",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(e,t),e}(u);function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){return!e||"object"!==S(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var E=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=_(this,j(e).call(this,t,n,[[1,1,0],[0,1,1]]))).color="#ffa726",o.borderColor="#e65100",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(e,t),e}(u);function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var B=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=x(this,T(e).call(this,t,n,[[1,0,0],[1,1,1]]))).color="#1E88E5",o.borderColor="#0D47A1",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(e,t),e}(u);function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var L=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=R(this,F(e).call(this,t,n,[[0,0,1],[1,1,1]]))).color="#7e57c2",o.borderColor="#311b92",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(e,t),e}(u);function M(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var D=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,(n=[{key:"getRandomBlock",value:function(t,e){switch(Math.round(6*Math.random()+1)){case 1:return new y(t,e);case 2:return new u(t,e);case 3:return new v(t,e);case 4:return new k(t,e);case 5:return new E(t,e);case 6:return new B(t,e);case 7:return new L(t,e);default:return new u(t,e)}}}])&&M(e.prototype,n),o&&M(e,o),t}();function X(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Y=new(function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance||(this.blockPicker=new D,this.block=this.blockPicker.getRandomBlock(0,0),t.instance=this),t.instance}var e,n,o;return e=t,(n=[{key:"setX",value:function(e){t.instance.xSize=e}},{key:"setY",value:function(e){t.instance.ySize=e}},{key:"setSide",value:function(e){t.instance.side=e}},{key:"setField",value:function(e){t.instance.field=e}},{key:"refreshBlock",value:function(){this.block=this.blockPicker.getRandomBlock(0,0)}}])&&X(e.prototype,n),o&&X(e,o),t}());document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("tetris");t.width=r.xSize*r.side,t.height=r.ySize*r.side;var e=t.getContext("2d"),n=function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.side,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fff",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;t.beginPath(),t.rect(e,n,o,o),t.fillStyle=c,t.fill(),t.lineWidth=u,t.strokeStyle=i,t.stroke()},o=function(t){for(var e=0,o=0,i=0;i<r.ySize;i++){for(var c=0;c<r.xSize;c++)0==r.field[i][c].value?n(t,e,o,r.side):n(t,e,o,r.side,r.field[i][c].borderColor,r.field[i][c].color),e+=r.side;o+=r.side,e=0}},i=function(t){o(e),Y.block.draw(e,n)},c=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"down";Y.block.move(e,n),i(0)},u=function(){Y.block.rotate(),i(r.side)};o(e),document.getElementById("drawBlock").addEventListener("click",(function(){Y.block.draw(e,n)})),document.getElementById("rotate").addEventListener("click",(function(){u()}));for(var f=document.getElementsByClassName("moveBlock"),l=function(t){var n=f[t],o=n.dataset.direction;n.addEventListener("click",(function(){c(e,r.side,o)}))},a=0;a<f.length;a++)l(a);document.addEventListener("keydown",(function(t){"ArrowDown"==t.key&&c(e,r.side,"down"),"ArrowUp"==t.key&&u(),"ArrowLeft"==t.key&&c(e,r.side,"left"),"ArrowRight"==t.key&&c(e,r.side,"right")}),!1);setInterval((function(){c(e,r.side,"down"),r.checkField()}),1e3)}))}]);